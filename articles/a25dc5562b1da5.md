---
title: "Dockerを使わずにClaude DesktopでGitHub Enterprise ServerのMCPサーバーを使う"
emoji: "🔌"
type: "tech"
topics: ["claude", "mcp", "github", "windows"]
published: true
publication_name: "pepabo"
---

## はじめに

Claude Desktopでは、Model Context Protocol（MCP）を使って外部ツールと連携できます。この記事では、GitHub Enterprise Server（GHES）のMCPサーバーを設定して、Claude DesktopからGHESのリポジトリやIssue、Pull Requestを操作する方法を紹介します。

## 公式ドキュメントとこの記事の違い

[公式のインストールガイド](https://github.com/github/github-mcp-server/blob/main/docs/installation-guides/install-claude.md)では、Claude Desktop向けにはDockerを使った方法が紹介されています。しかし、以下のような環境ではDockerを使う方法が利用できません。

### Docker Desktopを使っていない場合

Docker DesktopはWindows/macOS上でLinuxコンテナを実行するための一般的な方法ですが、ライセンスの都合などで使用していない場合もあります。WSL内にのみDockerをインストールしている場合、Claude Desktop（Windowsアプリ）から直接WSL内のDockerを呼び出すのは設定が煩雑です。

### Windows版Docker CEの制限

Docker CEをWindowsにバイナリからインストールする方法もありますが、[公式ドキュメント](https://docs.docker.com/engine/install/binaries/#install-server-and-client-binaries-on-windows)に記載されているとおり、この方法では**Windowsコンテナのみが動作し、Linuxコンテナは実行できません**。GitHub MCP ServerのDockerイメージはLinuxコンテナなので、この方法では動作しません。

### 解決策：バイナリを直接使う

これらの制約を回避するため、この記事ではDockerを使わずにバイナリを直接実行する方法を紹介します。公式ドキュメントではClaude Code CLI向けとされていますが、Claude Desktopでも同様に動作します。

## 前提条件

- Claude Desktopがインストール済み
- GitHub Enterprise Serverへのアクセス権

## GitHub MCP Serverの入手

GitHub公式のMCPサーバーを使用します。[github-mcp-serverのReleasesページ](https://github.com/github/github-mcp-server/releases)から、お使いのOS用のバイナリをダウンロードしてください。

ダウンロードしたバイナリは任意の場所に配置します（例：`C:\Users\<username>\bin\github-mcp-server.exe`）。

## Personal Access Tokenの取得

認証にはPersonal Access Token（PAT）が必要です。以下のいずれかの方法で取得できます。

### 方法1：gh CLIを使う

gh CLIがインストール済みであれば、以下のコマンドでトークンを取得できます。

```bash
gh auth token --hostname your-github.example.com
```

### 方法2：Web画面から発行する

GitHub Enterprise Serverの設定画面から、Personal Access Token（classic）を発行します。必要なスコープは用途に応じて選択してください。

- `repo` - リポジトリへのフルアクセス
- `read:org` - 組織情報の読み取り
- `read:user` - ユーザー情報の読み取り

## Claude Desktopの設定

Claude Desktopの「設定」→「開発者」から、ローカルのMCPサーバー設定を編集できます。以下の内容を追加してください。

```json
{
  "mcpServers": {
    "github_enterprise_server": {
      "command": "C:\\Users\\<username>\\bin\\github-mcp-server.exe",
      "args": [
        "stdio"
      ],
      "env": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "<your-personal-access-token>",
        "GITHUB_HOST": "https://your-github.example.com"
      }
    }
  }
}
```

各項目の説明は以下のとおりです。

| 項目 | 説明 |
|------|------|
| `command` | MCPサーバーのバイナリパス |
| `args` | 起動引数（`stdio`で標準入出力を使用） |
| `GITHUB_PERSONAL_ACCESS_TOKEN` | 取得したPAT |
| `GITHUB_HOST` | GHESのホストURL |

:::message
Windowsの場合、パスの区切りは`\\`（バックスラッシュ2つ）でエスケープする必要があります。
:::

## 動作確認

設定を保存したら、Claude Desktopを再起動します。

正常に設定できていれば、Claudeに対してGitHub関連の操作を依頼できるようになります。

- 「○○リポジトリのIssue一覧を見せて」
- 「このPull Requestの内容を確認して」
- 「新しいIssueを作成して」

## トラブルシューティング

MCPサーバーが正常に動作しない場合は、Claude Desktopの「設定」→「開発者」からログを確認できます。

## まとめ

GitHub Enterprise ServerのMCPサーバーを設定することで、Claude DesktopからGHES上のリソースに直接アクセスできるようになります。Issue管理やコードレビューなど、日常のGitHub操作をClaudeと一緒に効率化できます。
