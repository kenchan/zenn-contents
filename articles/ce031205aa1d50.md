---
title: "GHESのカスタムマーケットプレイスをClaude Desktopに追加する"
emoji: "🛒"
type: "tech"
topics: ["claudedesktop", "claude", "githubenterprise"]
published: true
publication_name: pepabo
---

## はじめに

Claude Desktopに[Cowork](https://claude.com/product/cowork)機能がリリースされ、Windows版でも利用できるようになりました。これに伴い、プラグインのマーケットプレイス機能も利用できるようになっています。

この記事では、GitHub Enterprise Server（GHES）上にホストしたカスタムマーケットプレイスをClaude Desktopに追加する方法を紹介します。

## マーケットプレイス機能とは

[マーケットプレイス](https://code.claude.com/docs/en/plugins)は、もともとClaude Code向けに提供されていたプラグインの仕組みです。Claude Desktopでも利用できるようになり、プラグインやインテグレーションを追加できるようになりました。公式のマーケットプレイスに加え、Gitリポジトリとしてホストされたカスタムマーケットプレイスにも対応しています。

社内で独自のMCPサーバーやプラグインを管理している場合、GHESにマーケットプレイスのリポジトリを用意しておくと、チームメンバーが簡単にプラグインを導入できます。

## GHESのカスタムマーケットプレイスを追加する

github.com上のリポジトリであれば、`owner/repo`を指定するだけでマーケットプレイスを追加できます。プライベートリポジトリの場合はPATの入力が求められますが、それだけで完了します。しかし、GHESのリポジトリはこの方法では追加できません。

GHESの場合は、認証情報を含めたURLを指定する必要があります。

### ドメイン許可リストへの追加

まず、GHESのホスト名をClaude Desktopのドメイン許可リストに追加しておきます。これがないとマーケットプレイスの追加に失敗する場合があります。ドメイン許可リストは「設定」→「機能」の中にあります。

![ドメイン許可リストの設定画面](/images/ce031205aa1d50/01.webp)

### Personal Access Tokenの取得

認証にはGHESのPersonal Access Token（PAT）が必要です。`repo`権限を付与してください。

以下のいずれかの方法で取得できます。

#### 方法1：GitHub CLIを使う

```bash
gh auth token -h ghes.example.com
```

#### 方法2：Web画面から発行する

GHESの設定画面からPersonal Access Token（classic）を発行します。スコープは`repo`を選択してください。

### マーケットプレイスの追加

Claude Desktopのマーケットプレイス追加画面で「URLで追加」を選択し、以下の形式でURLを入力します。

![URLでマーケットプレイスを追加するダイアログ](/images/ce031205aa1d50/02.webp)

```
https://<ghe-username>:<ghe-token>@ghes.example.com/<org>/<marketplace-repo>.git
```

各プレースホルダには以下を指定してください。

- `<ghe-username>`：GHESのユーザー名
- `<ghe-token>`：取得したPAT
- `<org>`：マーケットプレイスリポジトリのオーナー
- `<marketplace-repo>`：マーケットプレイスリポジトリ名

:::message alert
Claude Codeの場合はgitプロトコルを指定することでgit credential helperが参照されるため、トークンを埋め込む必要はありません。ただし、本日時点（2026年2月12日）の最新版のClaude Desktopではgitプロトコルでの接続ができないようです。そのため、この方法ではトークンが平文で設定ファイルに保存されます。トークンの取り扱いには十分ご注意ください。
:::

## まとめ

Claude DesktopのWindows版でもCowork機能とマーケットプレイスが利用できるようになりました。GHESにホストしたカスタムマーケットプレイスも、認証情報を含めたURLを指定すれば追加できます。社内で独自のプラグインやMCPサーバーを管理している場合に活用してみてください。
