---
title: "PreToolUseãƒ•ãƒƒã‚¯ã§WebSearchã§ã¯ãªãgemini-cliã‚’çµ¶å¯¾ã«ä½¿ã†ã‚ˆã†ã«ã™ã‚‹"
emoji: "ğŸš«"
type: "tech"
topics: ["claudecode", "mcp", "gemini"]
published: true
published_at: 2025-07-11 23:58
publication_name: pepabo
---

## ã¯ã˜ã‚ã«

Claude Codeã§ä½œæ¥­ä¸­ã€ç‰¹å®šã®ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨ã‚’åˆ¶é™ã—ãŸã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€WebSearchãƒ„ãƒ¼ãƒ«ã®ä»£ã‚ã‚Šã«ã€gemini-cli MCPã‚’ä½¿ã„ãŸã„å ´åˆãªã©ã§ã™ã€‚

æœ¬è¨˜äº‹ã§ã¯ã€PreToolUseãƒ•ãƒƒã‚¯ã‚’ä½¿ã£ã¦ç‰¹å®šã®ãƒ„ãƒ¼ãƒ«ã®å®Ÿè¡Œã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã€ä»£æ›¿ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨ã‚’ä¿ƒã™æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

## PreToolUseãƒ•ãƒƒã‚¯ã¨ã¯

PreToolUseãƒ•ãƒƒã‚¯ã¯ã€Claude CodeãŒãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ãƒ•ãƒƒã‚¯ã§ã™ã€‚ã“ã®ãƒ•ãƒƒã‚¯ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ„ãƒ¼ãƒ«ã®å®Ÿè¡Œã‚’è¨±å¯ãƒ»ãƒ–ãƒ­ãƒƒã‚¯ã—ãŸã‚Šã€å®Ÿè¡Œå‰ã«ç‰¹å®šã®å‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

## è¨­å®šä¾‹ï¼šWebSearchã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦gemini-cli mcpã®åˆ©ç”¨ã‚’ä¿ƒã™

ä»¥ä¸‹ã®è¨­å®šã‚’ `~/.claude/settings.json` ã«è¿½åŠ ã—ã¾ã™ã€‚è¨­å®šã®è©³ç´°ã€Claude Codeã®[Hooksã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.anthropic.com/ja/docs/claude-code/hooks)ã‚’å‚ç…§ãã ã•ã„ã€‚

```json:~/.claude/settings.json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "WebSearch",
        "hooks": [
          {
            "type": "command",
            "command": "echo '{\"decision\": \"block\", \"reason\": \"Use gemini mcp instead of WebSearch\"}'"
          }
        ]
      }
    ]
  }
}
```

## å®Ÿè¡Œä¾‹

WebSearchã‚’ä½¿ãŠã†ã¨ã—ãŸã¨ã“ã‚ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã€gemini-cli MCPã‚µãƒ¼ãƒãƒ¼ã‚’ã¤ã‹ã£ã¦ãã‚Œã¦ã„ã¾ã™ã€‚

```
> Claude Codeã®Hooksã«ã¤ã„ã¦Webã§èª¿ã¹ã¦

â— WebSearchãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦Claude Codeã®Hooksã«ã¤ã„ã¦èª¿ã¹ã¾ã™ã€‚

â— Web Search("Claude Code hooks feature configuration")
  â¿ Â Error: WebSearch operation blocked by hook:
     - Use gemini mcp instead of WebSearch
     - Use gemini mcp instead of WebSearch

â— ãƒ•ãƒƒã‚¯ã«ã‚ˆã£ã¦WebSearchãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚ä»£ã‚ã‚Šã«gemini mcpã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†æŒ‡ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

  gemini-cli - ask-gemini (MCP)(prompt: "Claude Code hooks feature - what are hooks, how to
                               configure them, available hook types, and examples")
```

