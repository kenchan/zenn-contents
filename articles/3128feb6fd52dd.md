---
title: "Slackのユーザーグループ全員のアイコンを一括ダウンロードするCLIツールを作った"
emoji: "📥"
type: "tech"
topics: ["slack", "cli", "nodejs", "typescript", "npm"]
published: true
publication_name: "pepabo"
---

## Slackのアイコンを一括で取得したい

プレゼン資料等の資料を作っていると、ある組織に所属するメンバーや特定のチームメンバーの顔写真を並べたい場合が年に何回かあります。Slackにはメンバーのプロフィール画像がありますが、一人ずつプロフィールページを開いて保存するのが非常に面倒です。特にチームメンバーが10人、20人といると、さすがに手作業ではやりたくなくなります。

そこで、コマンド1発でユーザーグループ全員のアイコンを一括ダウンロードできるCLIツールを作りました。

https://github.com/kenchan/slack_usergroup_icons_downloader

## 使い方

### Slack APIトークンの取得

まず、Slack APIトークンを取得します。

1. https://api.slack.com/apps にアクセス
2. 「Create New App」から新しいアプリを作成（または既存のアプリを選択）
3. 「OAuth & Permissions」を開く
4. 「User Token Scopes」に以下のスコープを追加：
   - `usergroups:read` - usergroupの一覧とメンバー取得用
   - `users:read` - ユーザー情報とプロフィール画像の取得用
5. アプリをワークスペースにインストール（または再インストール）
6. 「User OAuth Token」（`xoxp-`で始まるトークン）をコピー

### 実行

`npx`を使ってすぐに実行できます。以下の例では、`engineers` というユーザーグループに所属する全員のアイコンをダウンロードします。 ファイル名は`{ユーザー名}.jpg`の形式になります。

```bash
SLACK_API_TOKEN='xoxp-...' npx slack-usergroup-icons-downloader engineers
```

### オプション

画像サイズを指定できます。Slackのユーザーアイコンは、なぜか人によって存在しないサイズがあります。もしダウンロードに失敗した人がいたら別のサイズで試してみてください。

```bash
# オリジナルサイズでダウンロード
SLACK_API_TOKEN='xoxp-...' npx slack-usergroup-icons-downloader --size original engineers

# 512pxでダウンロード
SLACK_API_TOKEN='xoxp-...' npx slack-usergroup-icons-downloader --size 512 engineers
```

利用可能なサイズは以下の通りです。

- `original`
- `1024`
- `512`
- `192`（デフォルト）
- `72`

出力先も変更できます。

```bash
SLACK_API_TOKEN='xoxp-...' npx slack-usergroup-icons-downloader --output ./icons engineers
```
## まとめ

Slackのusergroupメンバーのアイコンを一括ダウンロードするCLIツールを紹介しました。

- GitHub: https://github.com/kenchan/slack_usergroup_icons_downloader
- npm: `npx slack-usergroup-icons-downloader`

プレゼン資料作成や、チームメンバー一覧の可視化の際にぜひ使ってみてください。
